//<script type="text/javascript">

// Auto generated file - created by app.Builder.js- do not edit directly (at present!)

Roo.namespace('Pman.Dialog');

Pman.Dialog.CoreCompanies = {

 _strings : {
  '4ef6052d74436756f08e95fd63949653' :"Enter Company Name",
  'cf3a5d25d39613ad5bbc2f5eb0f9b675' :"Enter Fax Number",
  '72b9d3d2e231f1de7a2bd70737f644aa' :"Add / Edit Organization",
  '231bc72756b5e6de492aaaa1577f61b1' :"Remarks",
  'a1fa27779242b4902f7ae3bdd5c6d508' :"Type",
  '8c04eb09879a05470fae436ba76e3bb9' :"Enter Url",
  '471ddaf9e80da04dd5a3a54daa0239b0' :"Select Image Type",
  'e7b47c58815acf1d3afa59a84b5db7fb' :"Company Name",
  'b18c29b8470190a02813415a04a2191f' :"Filesize",
  '733640ec0c9367df1b4d85eb286ed9ae' :"Enter code",
  '023a5dfa857c4aa0156e6685231a1dbd' :"Select Type",
  'ce8ae9da5b7cd6c3df2929543a9af92d' :"Email",
  'bc3a4c40d007b8d610a16312970e5cb3' :"Enter Phone Number",
  '9810aa2b9f44401be4bf73188ef2b67d' :"Fax",
  'bcc254b55c4a1babdf1dcb82c207506b' :"Phone",
  '1243daf593fa297e07ab03bf06d925af' :"Searching...",
  '11f7b456ca765e9f556f653090045ae7' :"Images / PDF",
  'b33457e7e1cd5dbf1db34a0c60fcb75f' :"Company ID (for filing Ref.)",
  '55cfeeacad2f92b9fea0a1bbb6449fac' :"Update Image Details",
  '32c4e9483403d60115b21519178e5384' :"Enter Address",
  'ea4788705e6873b424c65e91c2846b19' :"Cancel",
  '8e16a71b3d8217eb80b39b7d8dec4296' :"Image Type",
  '9f86c00615b1a210935ac28ff8ebbb22' :"Enter Email Address",
  'c54b90756cfbeff9217293b567cb2eb0' :"Enter remarks",
  'dd7bf230fde8d4836917806aff6a6b27' :"Address",
  '02a3a357710cc2a5dfdfb74ed012fb59' :"Url",
  '5e40fc8fe5b4bd81365ce50e466dfba7' :"core_company",
  'dc9227804a61468a485e682cb932bdf7' :"Company Details",
  'b78a3223503896721cca1303f776159b' :"Title",
  'c9cc8cce247e49bae79f15173ce97354' :"Save",
  'ea72bacd2fdfa818907bb9559e6905a1' :"Upload Image or File",
  'c9d03748d1a54666b5c7a5187109301b' :"Delete Selected File or  Image",
  '8535bcc0f05358a583bb432bbadf7e0d' :"Select type",
  '529701d5ccccf8a1c604c27f48ce7d82' :"Mimetype"
 },
 _named_strings : {
  'name_qtip' : '4ef6052d74436756f08e95fd63949653' /* Enter Company Name */ ,
  'tel_fieldLabel' : 'bcc254b55c4a1babdf1dcb82c207506b' /* Phone */ ,
  'address_qtip' : '32c4e9483403d60115b21519178e5384' /* Enter Address */ ,
  'imgtype_fieldLabel' : '8e16a71b3d8217eb80b39b7d8dec4296' /* Image Type */ ,
  'comptype_id_display_name_emptyText' : '023a5dfa857c4aa0156e6685231a1dbd' /* Select Type */ ,
  'comptype_id_display_name_fieldLabel' : 'a1fa27779242b4902f7ae3bdd5c6d508' /* Type */ ,
  'comptype_id_display_name_loadingText' : '1243daf593fa297e07ab03bf06d925af' /* Searching... */ ,
  'code_fieldLabel' : 'b33457e7e1cd5dbf1db34a0c60fcb75f' /* Company ID (for filing Ref.) */ ,
  'fax_fieldLabel' : '9810aa2b9f44401be4bf73188ef2b67d' /* Fax */ ,
  'title_fieldLabel' : 'b78a3223503896721cca1303f776159b' /* Title */ ,
  'imgtype_qtip' : '471ddaf9e80da04dd5a3a54daa0239b0' /* Select Image Type */ ,
  'name_fieldLabel' : 'e7b47c58815acf1d3afa59a84b5db7fb' /* Company Name */ ,
  'fax_qtip' : 'cf3a5d25d39613ad5bbc2f5eb0f9b675' /* Enter Fax Number */ ,
  'url_qtip' : '8c04eb09879a05470fae436ba76e3bb9' /* Enter Url */ ,
  'remarks_fieldLabel' : '231bc72756b5e6de492aaaa1577f61b1' /* Remarks */ ,
  'code_qtip' : '733640ec0c9367df1b4d85eb286ed9ae' /* Enter code */ ,
  'tel_qtip' : 'bc3a4c40d007b8d610a16312970e5cb3' /* Enter Phone Number */ ,
  'imgtype_loadingText' : '1243daf593fa297e07ab03bf06d925af' /* Searching... */ ,
  'email_qtip' : '9f86c00615b1a210935ac28ff8ebbb22' /* Enter Email Address */ ,
  'url_fieldLabel' : '02a3a357710cc2a5dfdfb74ed012fb59' /* Url */ ,
  'remarks_qtip' : 'c54b90756cfbeff9217293b567cb2eb0' /* Enter remarks */ ,
  'comptype_id_display_name_qtip' : '8535bcc0f05358a583bb432bbadf7e0d' /* Select type */ ,
  'email_fieldLabel' : 'ce8ae9da5b7cd6c3df2929543a9af92d' /* Email */ ,
  'mimetype_fieldLabel' : '529701d5ccccf8a1c604c27f48ce7d82' /* Mimetype */ ,
  'address_fieldLabel' : 'dd7bf230fde8d4836917806aff6a6b27' /* Address */ ,
  'imageUpload_fieldLabel' : 'ea72bacd2fdfa818907bb9559e6905a1' /* Upload Image or File */ ,
  'ontable_value' : '5e40fc8fe5b4bd81365ce50e466dfba7' /* core_company */ ,
  'imgtype_emptyText' : '8535bcc0f05358a583bb432bbadf7e0d' /* Select type */ ,
  'filesize_fieldLabel' : 'b18c29b8470190a02813415a04a2191f' /* Filesize */ 
 },

 dialog : false,
 callback:  false,

 show : function(data, cb)
 {
  if (!this.dialog) {
   this.create();
  }

  this.callback = cb;
  this.data = data;
  this.dialog.show.apply(this.dialog,  Array.prototype.slice.call(arguments).slice(2));
  if (this.form) {
   this.form.reset();
   this.form.setValues(data);
   this.form.fireEvent('actioncomplete', this.form,  { type: 'setdata', data: data });
  }

 },

 create : function()
 {
   var _this = this;
   this.dialog = Roo.factory({
    xtype : 'LayoutDialog',
    autoCreate : true,
    closable : false,
    collapsible : false,
    draggable : false,
    height : 500,
    modal : true,
    shadow : true,
    title : _this._strings['72b9d3d2e231f1de7a2bd70737f644aa'] /* Add / Edit Organization */,
    width : 550,
    xns : Roo,
    '|xns' : 'Roo',
    center : {
     xtype : 'LayoutRegion',
     alwaysShowTabs : true,
     autoScroll : false,
     closeOnTab : true,
     tabPosition : 'top',
     xns : Roo,
     '|xns' : 'Roo'
    },
    buttons : [
     {
      xtype : 'Button',
      text : _this._strings['ea4788705e6873b424c65e91c2846b19'] /* Cancel */,
      listeners : {
       click : function (_self, e)
        {
            _this.dialog.hide();
        }
      },
      xns : Roo,
      '|xns' : 'Roo'
     },
     {
      xtype : 'Button',
      text : _this._strings['c9cc8cce247e49bae79f15173ce97354'] /* Save */,
      listeners : {
       click : function (_self, e)
        {
            if(!_this.form.isValid()){
                Roo.MessageBox.alert('Error', 'Please Correct all the errors in red');
                return;
            }
            
            new Pman.Request({
                url : baseURL + '/Roo/Core_company.php',
                method : 'POST',
                params : {
                  id : _this.form.findField('id').getValue() * 1,
                  name : _this.form.findField('name').getValue(),
                  _check_name : 1
                }, 
                success : function(res) {
                    _this.dialog.el.mask("Saving");
                    _this.form.doAction("submit");
                },
                failure : function(res) {
                    Roo.MessageBox.confirm(
                        "Confirm", 
                        "The company name has been used. Save it anyway?", 
                        function(res) {
                            if(res != 'yes') {
                                return;
                            }
                            
                            _this.dialog.el.mask("Saving");
                            _this.form.doAction("submit");
                        }
                    );
                }
            });
            
            return;
            
        }
      },
      xns : Roo,
      '|xns' : 'Roo'
     }
    ],
    items  : [
     {
      xtype : 'ContentPanel',
      autoCreate : true,
      autoScroll : true,
      fitToFrame : true,
      region : 'center',
      title : _this._strings['dc9227804a61468a485e682cb932bdf7'] /* Company Details */,
      xns : Roo,
      '|xns' : 'Roo',
      items  : [
       {
        xtype : 'Form',
        fileUpload : true,
        labelWidth : 160,
        url : baseURL + '/Roo/core_company.php',
        listeners : {
         actioncomplete : function(f, act) {
              _this.dialog.el.unmask();
              //console.log('load completed'); 
              // error messages?????
              if(act.type == 'setdata'){
                  this.load({ method: 'GET', params: { '_id' : _this.data.id }});
                  return;
              }
             
              if (act.type == 'load') {
                  _this.data = act.result.data;
                  var meth = _this.data.comptype == 'OWNER' ? 'disable' : 'enable';
               
                      
                  if (_this.form.findField('comptype')) {
                      _this.form.findField('comptype')[meth]();
                  }
                   
                 // _this.loaded();
                  return;
              }
              
              
              if (act.type == 'submit') { // only submitted here if we are 
                  _this.dialog.hide();
                 
                  if (_this.callback) {
                      _this.callback.call(this, act.result.data);
                  }
                  return; 
              }
              // unmask?? 
          },
         actionfailed : function(f, act) {
              _this.dialog.el.unmask();
              // error msg???
              Pman.standardActionFailed(f,act);
                        
          },
         rendered : function (form)
          {
              _this.form = form;
          }
        },
        xns : Roo.form,
        '|xns' : 'Roo.form',
        items  : [
         {
          xtype : 'Column',
          width : 500,
          xns : Roo.form,
          '|xns' : 'Roo.form',
          items  : [
           {
            xtype : 'TextField',
            allowBlank : true,
            fieldLabel : _this._strings['b33457e7e1cd5dbf1db34a0c60fcb75f'] /* Company ID (for filing Ref.) */,
            name : 'code',
            qtip : _this._strings['733640ec0c9367df1b4d85eb286ed9ae'] /* Enter code */,
            width : 100,
            xns : Roo.form,
            '|xns' : 'Roo.form'
           },
           {
            xtype : 'ComboBox',
            allowBlank : false,
            alwaysQuery : true,
            displayField : 'display_name',
            emptyText : _this._strings['023a5dfa857c4aa0156e6685231a1dbd'] /* Select Type */,
            fieldLabel : _this._strings['a1fa27779242b4902f7ae3bdd5c6d508'] /* Type */,
            forceSelection : true,
            hiddenName : 'comptype_id',
            listWidth : 250,
            loadingText : _this._strings['1243daf593fa297e07ab03bf06d925af'] /* Searching... */,
            minChars : 2,
            name : 'comptype_id_display_name',
            pageSize : 20,
            qtip : _this._strings['8535bcc0f05358a583bb432bbadf7e0d'] /* Select type */,
            queryParam : 'query[name]',
            selectOnFocus : true,
            tpl : '<div class=\"x-grid-cell-text x-btn button\"><b>{name}</b> : {display_name}</div>',
            triggerAction : 'all',
            typeAhead : false,
            valueField : 'id',
            width : 200,
            listeners : {
             render : function (_self)
              {
                  _this.etypeCombo = _self;
              }
            },
            xns : Roo.form,
            '|xns' : 'Roo.form',
            store : {
             xtype : 'Store',
             remoteSort : true,
             sortInfo : { direction : 'ASC', field: 'id' },
             listeners : {
              beforeload : function (_self, o){
                   o.params = o.params || {};
                   // set more here
                   //o.params['query[empty_etype]'] = 1;
                   o.params.etype = 'COMPTYPE';
               }
             },
             xns : Roo.data,
             '|xns' : 'Roo.data',
             proxy : {
              xtype : 'HttpProxy',
              method : 'GET',
              url : baseURL + '/Roo/core_enum.php',
              xns : Roo.data,
              '|xns' : 'Roo.data'
             },
             reader : {
              xtype : 'JsonReader',
              fields : [{"name":"id","type":"int"},{"name":"name","type":"string"}],
              id : 'id',
              root : 'data',
              totalProperty : 'total',
              xns : Roo.data,
              '|xns' : 'Roo.data'
             }
            }
           },
           {
            xtype : 'TextField',
            allowBlank : false,
            fieldLabel : _this._strings['e7b47c58815acf1d3afa59a84b5db7fb'] /* Company Name */,
            name : 'name',
            qtip : _this._strings['4ef6052d74436756f08e95fd63949653'] /* Enter Company Name */,
            width : 300,
            xns : Roo.form,
            '|xns' : 'Roo.form'
           },
           {
            xtype : 'TextField',
            allowBlank : true,
            fieldLabel : _this._strings['bcc254b55c4a1babdf1dcb82c207506b'] /* Phone */,
            name : 'tel',
            qtip : _this._strings['bc3a4c40d007b8d610a16312970e5cb3'] /* Enter Phone Number */,
            width : 300,
            xns : Roo.form,
            '|xns' : 'Roo.form'
           },
           {
            xtype : 'TextField',
            allowBlank : true,
            fieldLabel : _this._strings['9810aa2b9f44401be4bf73188ef2b67d'] /* Fax */,
            name : 'fax',
            qtip : _this._strings['cf3a5d25d39613ad5bbc2f5eb0f9b675'] /* Enter Fax Number */,
            width : 300,
            xns : Roo.form,
            '|xns' : 'Roo.form'
           },
           {
            xtype : 'TextField',
            allowBlank : true,
            fieldLabel : _this._strings['ce8ae9da5b7cd6c3df2929543a9af92d'] /* Email */,
            name : 'email',
            qtip : _this._strings['9f86c00615b1a210935ac28ff8ebbb22'] /* Enter Email Address */,
            width : 300,
            xns : Roo.form,
            '|xns' : 'Roo.form'
           },
           {
            xtype : 'TextField',
            allowBlank : true,
            fieldLabel : _this._strings['02a3a357710cc2a5dfdfb74ed012fb59'] /* Url */,
            name : 'url',
            qtip : _this._strings['8c04eb09879a05470fae436ba76e3bb9'] /* Enter Url */,
            width : 300,
            xns : Roo.form,
            '|xns' : 'Roo.form'
           },
           {
            xtype : 'TextArea',
            allowBlank : true,
            fieldLabel : _this._strings['dd7bf230fde8d4836917806aff6a6b27'] /* Address */,
            name : 'address',
            qtip : _this._strings['32c4e9483403d60115b21519178e5384'] /* Enter Address */,
            width : 300,
            xns : Roo.form,
            '|xns' : 'Roo.form'
           },
           {
            xtype : 'TextArea',
            allowBlank : true,
            fieldLabel : _this._strings['231bc72756b5e6de492aaaa1577f61b1'] /* Remarks */,
            height : 120,
            name : 'remarks',
            qtip : _this._strings['c54b90756cfbeff9217293b567cb2eb0'] /* Enter remarks */,
            width : 300,
            xns : Roo.form,
            '|xns' : 'Roo.form'
           }
          ]
         },
         {
          xtype : 'Hidden',
          name : 'id',
          xns : Roo.form,
          '|xns' : 'Roo.form'
         }
        ]
       }
      ]
     },
     {
      xtype : 'NestedLayoutPanel',
      region : 'center',
      title : _this._strings['11f7b456ca765e9f556f653090045ae7'] /* Images / PDF */,
      listeners : {
       activate : function (_self)
        {
           _this.imagePanel = _self;
           
         
           
        //   console.log('activate');
           if (typeof(_this.imageView) == 'undefined') {
             return;
           }
           _this.imageView.el.unmask();
           if (_this.data.id) {
               _this.imageView.loadImages();
           } else {
              _this.imageView.el.mask("Save company first");
           }
           
           if (_this.hasUploadWatch) {
             return;
           }
            _this.hasUploadWatch =true;
            _this.uploadSending =false;
            window.setInterval( function() {
                // prevent warning in editor..
                if (!_this.uploadForm) {return; }
                 
                
                var val = _this.uploadForm.findField('imageUpload').getValue();
                if (!val || !val.length) {
                    return;
                }
                 var id = _this.form.findField('id').getValue() * 1;    
                if (!id) {
                    Roo.MessageBox.alert("Error", "Save company first");
                   _this.uploadForm.reset();
                    return;
                }
                if (_this.uploadSending) {
                    return;
                }
                 _this.uploadSending =true;
                _this.uploadForm.findField('onid').setValue(_this.data.id);
                _this.uploadForm.el.mask("Sending");
                _this.uploadForm.submit.defer(100, _this.uploadForm);
           
          }, 1000)  
           
        }
      },
      xns : Roo,
      '|xns' : 'Roo',
      layout : {
       xtype : 'BorderLayout',
       xns : Roo,
       '|xns' : 'Roo',
       center : {
        xtype : 'LayoutRegion',
        xns : Roo,
        '|xns' : 'Roo'
       },
       east : {
        xtype : 'LayoutRegion',
        hidden : true,
        width : 200,
        xns : Roo,
        '|xns' : 'Roo'
       },
       south : {
        xtype : 'LayoutRegion',
        height : 60,
        xns : Roo,
        '|xns' : 'Roo'
       },
       items  : [
        {
         xtype : 'ContentPanel',
         autoScroll : true,
         fitContainer : true,
         fitToFrame : true,
         region : 'center',
         xns : Roo,
         '|xns' : 'Roo',
         toolbar : {
          xtype : 'Toolbar',
          xns : Roo,
          '|xns' : 'Roo',
          items  : [
           {
            xtype : 'Fill',
            xns : Roo.Toolbar,
            '|xns' : 'Roo.Toolbar'
           },
           {
            xtype : 'Button',
            text : _this._strings['c9d03748d1a54666b5c7a5187109301b'] /* Delete Selected File or  Image */,
            listeners : {
             click : function (_self, e)
              {
                  if (!_this.imageView.getSelectedNodes().length) {
                   Roo.MessageBox.alert("Error", "Select an Image");
                   return;
                 }
                 var id  = _this.imageView.getNodeData(_this.imageView.getSelectedNodes()[0]).id;
                 _this.imageView.el.mask('Deleting');
                 
                 Roo.Ajax.request({
                    url : baseURL + '/Roo/Images.php',
                    params : {
                       _delete : id
                    },
                    method : 'POST',
                    success : function() {
                        _this.imageView.loadImages();
                    },
                    failure : function() {
                         _this.imageView.el.unmask();
                         Roo.MessageBox.alert("Error", "Error deleting image");
                         return;
                    }
                });
               }
            },
            xns : Roo.Toolbar,
            '|xns' : 'Roo.Toolbar'
           }
          ]
         },
         items  : [
          {
           xtype : 'JsonView',
           jsonRoot : 'data',
           loadImages : function() {
               var imgbase = typeof(publicBaseURL) != 'undefined' ? publicBaseURL : baseURL;
           
                this.load({
                   url : baseURL + '/Roo/Images.php',
                   method : 'GET',
                   params : {
                      ontable : 'core_company',
                      onid : _this.data.id,
                      'query[imagesize]' : '150x150',
                      'query[imageBaseURL]' : imgbase
                   },
                   text : 'Loading'
              });
              
           },
           singleSelect : true,
           listeners : {
            beforerender : function (_self, data)
             {
                _this.imageView = _self;
                
                if (this.stylesheet) {
                   return;
                }
                this.el.addClass('thumb-browser');
             
                
                this.stylesheet = Roo.util.CSS.createStyleSheet(
                     {
                       '.thumb-browser .thumb-wrap' : {
                             border:'3px solid #EEE',
                             'float':'left',
                             height:'190px',
                             margin:'2px',
                             'padding-left':'5px',
                             'padding-top':'5px',
                             width:'160px'
                         },
                         '.thumb-browser .x-view-selected' : {
                           border:'3px solid #333'
                       
                         },
                         '.thumblabel' : {
                             'font-size': '11px',
                             'font-family' : 'tahoma, verdana, helvetica',
                             'max-width': '153px',
                                 'overflow': 'hidden',
                                 'white-space': 'nowrap'
                         },
                         '.thumb-img' : {
                             'font-size': '11px',
                             'font-family' : 'tahoma, verdana, helvetica',
                             'max-width': '160px',
                                 'overflow': 'hidden',
                                 'white-space': 'nowrap'
                         }
             
                     }, Roo.id()
                     );
                
             },
            dblclick : function (_self, index, node, e)
             {
                    
                    if (!node) {
                     return;
                     }
                    var snode = false;
                    try {
                         snode =  _this.imageView.getNodeData(node);
                     } catch (e) {}
                     
                      
                     if (!snode) {
                         return;
                     }
                     new Pman.Download({
                         url : baseURL + '/Images/Download/' + snode.id + '/'  + snode.shorten_name
                       }); 
             },
            selectionchange : function (_self, selections)
             {
                  
                  var snode = false;
                  if (selections && selections.length) {
                     try {
                        var snode =  _this.imageView.getNodeData(selections[0]);
                     } catch (e) {}
                 }
                  
                 if (!snode) {
                      _this.imagePanel.layout.getRegion('east').hide();
                     return;
                 }
                 _this.imagePanel.layout.getRegion('east').show();    
              
                 _this.imageForm.setValues(snode);
             }
           },
           xns : Roo,
           '|xns' : 'Roo',
           tpl : {
            xtype : 'Template',
            html : '<div class="thumb-wrap"> ' + 
              '<div class="thumb"><img  src="{url_thumb}" class="thumb-img"></div>' + 
              '<div class="thumblabel" qtip="{linkurl}">{title}<br/>{linkurl}</div>' + 
            '</div>',
            xns : Roo,
            '|xns' : 'Roo'
           }
          }
         ]
        },
        {
         xtype : 'ContentPanel',
         region : 'south',
         xns : Roo,
         '|xns' : 'Roo',
         items  : [
          {
           xtype : 'Form',
           fileUpload : true,
           labelWidth : 200,
           progressUrl : baseURL  + '/Core/UploadProgress.php',
           style : 'margin: 10px;',
           url : baseURL + '/Roo/Images.php',
           listeners : {
            actioncomplete : function (_self, action)
             {
             // only action this will handle is submit?
             // should test for errors..
                 if (action.failureType) {
                     _this.uploadForm.el.unmask();
                     _this.uploadSending = false;
                     Roo.MessageBox.alert("Error", "Upload Failed");
                     return false;
                 
                 }
                   
                 
                 if (action.type =='submit') {
                      _this.uploadForm.reset();
                        _this.uploadSending = false;
                       _this.uploadForm.el.unmask();         
                       _this.imageView.loadImages();
                      return;
                 }
                  
             },
            actionfailed : function (_self, action)
             {
             
                _this.uploadForm.el.unmask();
                _this.uploadForm.reset();
                 _this.uploadSending = false;
                 Roo.MessageBox.alert("Error", "Upload Failed");
                 _this.imageView.loadImages();
                 
               
             },
            rendered : function (form)
             {
               _this.uploadForm = form;
             }
           },
           xns : Roo.form,
           '|xns' : 'Roo.form',
           items  : [
            {
             xtype : 'Row',
             xns : Roo.form,
             '|xns' : 'Roo.form',
             items  : [
              {
               xtype : 'Column',
               width : 600,
               xns : Roo.form,
               '|xns' : 'Roo.form',
               items  : [
                {
                 xtype : 'TextField',
                 allowBlank : false,
                 fieldLabel : _this._strings['ea72bacd2fdfa818907bb9559e6905a1'] /* Upload Image or File */,
                 inputType : 'file',
                 name : 'imageUpload',
                 width : 250,
                 listeners : {
                  change : function (_self, newValue, oldValue)
                   {
                       
                   }
                 },
                 xns : Roo.form,
                 '|xns' : 'Roo.form'
                },
                {
                 xtype : 'Hidden',
                 name : 'onid',
                 xns : Roo.form,
                 '|xns' : 'Roo.form'
                },
                {
                 xtype : 'Hidden',
                 name : 'ontable',
                 value : _this._strings['5e40fc8fe5b4bd81365ce50e466dfba7'] /* core_company */,
                 xns : Roo.form,
                 '|xns' : 'Roo.form'
                }
               ]
              }
             ]
            }
           ]
          }
         ]
        },
        {
         xtype : 'ContentPanel',
         region : 'east',
         xns : Roo,
         '|xns' : 'Roo',
         items  : [
          {
           xtype : 'Form',
           labelAlign : 'top',
           method : 'POST',
           style : 'margin:10px;',
           url : baseURL + '/Roo/Images.php',
           listeners : {
            actioncomplete : function(_self,action)
             {
                 if (action.type == 'setdata') {
                    //_this.dialog.el.mask("Loading");
                    //this.load({ method: 'GET', params: { '_id' : _this.data.id }});
                    return;
                 }
                 if (action.type == 'load') {
             
                     return;
                 }
                 if (action.type =='submit') {
                      _this.selectAfterLoad = this.findField('id').getValue();
                        var lr =  _this.imagePanel.layout.getRegion('east');
                     lr.el.unmask();
                     _this.imageView.loadImages();
                      return;
                 }
             },
            actionfailed : function (_self, action)
             {
                     var lr =  _this.imagePanel.layout.getRegion('east');
                     lr.el.unmask();
                if (action.failureType ==  Roo.form.Action.CLIENT_INVALID) {
                 Roo.MessageBox.alert("Error", "Correct All the errors in Red");
                 return;
                }
                 Roo.MessageBox.alert("Error", "Problem sending to server");
             },
            rendered : function (form)
             {
             
                 _this.imageForm= form;
             }
           },
           xns : Roo.form,
           '|xns' : 'Roo.form',
           items  : [
            {
             xtype : 'TextArea',
             fieldLabel : _this._strings['b78a3223503896721cca1303f776159b'] /* Title */,
             height : 50,
             name : 'title',
             width : 150,
             xns : Roo.form,
             '|xns' : 'Roo.form'
            },
            {
             xtype : 'ComboBox',
             alwaysQuery : true,
             displayField : 'name',
             editable : false,
             emptyText : _this._strings['8535bcc0f05358a583bb432bbadf7e0d'] /* Select type */,
             fieldLabel : _this._strings['8e16a71b3d8217eb80b39b7d8dec4296'] /* Image Type */,
             forceSelection : true,
             listWidth : 200,
             loadingText : _this._strings['1243daf593fa297e07ab03bf06d925af'] /* Searching... */,
             minChars : 2,
             name : 'imgtype',
             pageSize : 20,
             qtip : _this._strings['471ddaf9e80da04dd5a3a54daa0239b0'] /* Select Image Type */,
             queryParam : 'query[name]',
             selectOnFocus : true,
             tpl : '<div class=\"x-grid-cell-text x-btn button\"><b>{name}</b> </div>',
             triggerAction : 'all',
             typeAhead : true,
             valueField : 'name',
             width : 150,
             xns : Roo.form,
             '|xns' : 'Roo.form',
             store : {
              xtype : 'Store',
              remoteSort : true,
              sortInfo : { direction : 'ASC', field: 'id' },
              listeners : {
               beforeload : function (_self, o){
                    o.params = o.params || {};
                    // set more here
                       // set more here
                    o.params.etype="Image Types";
                }
              },
              xns : Roo.data,
              '|xns' : 'Roo.data',
              proxy : {
               xtype : 'HttpProxy',
               method : 'GET',
               url : baseURL + '/Roo/core_enum.php',
               xns : Roo.data,
               '|xns' : 'Roo.data'
              },
              reader : {
               xtype : 'JsonReader',
               fields : [],
               id : 'id',
               root : 'data',
               totalProperty : 'total',
               xns : Roo.data,
               '|xns' : 'Roo.data'
              }
             }
            },
            {
             xtype : 'TextField',
             fieldLabel : _this._strings['529701d5ccccf8a1c604c27f48ce7d82'] /* Mimetype */,
             name : 'mimetype',
             readOnly : true,
             width : 150,
             xns : Roo.form,
             '|xns' : 'Roo.form'
            },
            {
             xtype : 'TextField',
             fieldLabel : _this._strings['b18c29b8470190a02813415a04a2191f'] /* Filesize */,
             name : 'filesize',
             readOnly : true,
             width : 75,
             xns : Roo.form,
             '|xns' : 'Roo.form'
            },
            {
             xtype : 'Hidden',
             name : 'id',
             xns : Roo.form,
             '|xns' : 'Roo.form'
            },
            {
             xtype : 'Button',
             text : _this._strings['55cfeeacad2f92b9fea0a1bbb6449fac'] /* Update Image Details */,
             listeners : {
              click : function (_self, e)
               {
               
                   var lr =  _this.imagePanel.layout.getRegion('east');
                   lr.el.mask("Saving");
                  _this.imageForm.submit();
               }
             },
             xns : Roo,
             '|xns' : 'Roo'
            }
           ]
          }
         ]
        }
       ]
      }
     }
    ]
   });
 }
};
