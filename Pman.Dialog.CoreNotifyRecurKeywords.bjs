{
 "name" : "Pman.Dialog.CoreNotifyRecurKeywords",
 "parent" : "",
 "title" : "",
 "path" : "/home/edward/gitlive/Pman.Core/Pman.Dialog.CoreNotifyRecurKeywords.bjs",
 "permname" : "",
 "modOrder" : "001",
 "strings" : {
  "0ee0f676f631ad4e8a5844314a3a20de" : "Select campaign",
  "1243daf593fa297e07ab03bf06d925af" : "Searching...",
  "ea4788705e6873b424c65e91c2846b19" : "Cancel",
  "e0aa021e21dddbd6d8cecec71e9cf564" : "OK",
  "790f855c2139f2faecb810519e90b833" : "Add Notification Keywords",
  "ded4cba1b04eb8236e24a3e39470d8a7" : "Select Campaign"
 },
 "items" : [
  {
   "listeners" : {
    "show" : "function (_self)\n{\n    \n}"
   },
   "modal" : true,
   "collapsible" : false,
   "background" : true,
   "title" : "Add Notification Keywords",
   "xtype" : "LayoutDialog",
   "width" : 400,
   "$ xns" : "Roo",
   "closable" : false,
   "resizable" : false,
   "height" : 150,
   "items" : [
    {
     "xtype" : "LayoutRegion",
     "$ xns" : "Roo",
     "titlebar" : false,
     "* prop" : "center"
    },
    {
     "region" : "center",
     "fitToFrame" : true,
     "background" : true,
     "xtype" : "ContentPanel",
     "$ xns" : "Roo",
     "items" : [
      {
       "listeners" : {
        "|actioncomplete" : "function (_self, action)\n{\n  if (action.type == 'setdata') {\n        \n        if(_this.data.id){\n            _this.dialog.el.mask(\"Loading\");\n            this.load({ method: 'GET', params: { '_id' : _this.data.id }}); \n        }\n        \n        return;\n    }\n    if (action.type == 'load') {\n        _this.dialog.el.unmask();\n        return;\n    }\n    if (action.type == 'submit' ) {\n        _this.dialog.el.unmask();\n        _this.dialog.hide();\n\n        if (_this.callback) {\n           _this.callback.call(_this, action.result.data);\n        }\n        _this.form.reset();\n    }\n}\n",
        "|rendered" : "function (form)\n{\n   _this.form = form;\n}"
       },
       "$ url" : "baseURL + '/Roo/Core_notify_recur.php'",
       "xtype" : "Form",
       "method" : "POST",
       "style" : "margin: 5px",
       "$ xns" : "Roo.form",
       "items" : [
        {
         "alwaysQuery" : true,
         "listWidth" : 400,
         "triggerAction" : "all",
         "fieldLabel" : "Campaign",
         "forceSelection" : true,
         "selectOnFocus" : true,
         "pageSize" : 20,
         "Number width" : 200,
         "displayField" : "name",
         "emptyText" : "Select Campaign",
         "hiddenName" : "campaign_id",
         "minChars" : 2,
         "valueField" : "id",
         "xtype" : "ComboBox",
         "allowBlank" : false,
         "typeAhead" : false,
         "editable" : true,
         "$ xns" : "Roo.form",
         "name" : "camapign_id_name",
         "qtip" : "Select campaign",
         "queryParam" : "query[name]",
         "tpl" : "<div class=\"x-grid-cell-text x-btn button\"><b>{name}</b></div>",
         "loadingText" : "Searching...",
         "items" : [
          {
           "listeners" : {
            "|beforeload" : "function (_self, o){\n    o.params = o.params || {};\n    \n}\n"
           },
           "xtype" : "Store",
           "remoteSort" : true,
           "$ sortInfo" : "{ direction : 'DESC', field: 'id' }",
           "$ xns" : "Roo.data",
           "* prop" : "store",
           "items" : [
            {
             "$ url" : "baseURL + '/Roo/Projects.php'",
             "method" : "GET",
             "xtype" : "HttpProxy",
             "$ xns" : "Roo.data",
             "* prop" : "proxy"
            },
            {
             "id" : "id",
             "root" : "data",
             "xtype" : "JsonReader",
             "$ xns" : "Roo.data",
             "$ fields" : "[{\"name\":\"id\",\"type\":\"int\"},{\"name\":\"name\",\"type\":\"string\"}]",
             "* prop" : "reader",
             "totalProperty" : "total"
            }
           ]
          }
         ]
        },
        {
         "fieldLabel" : "Company Types",
         "hiddenName" : "filter_company_type",
         "xtype" : "ComboBoxArray",
         "width" : 210,
         "$ xns" : "Roo.form",
         "name" : "filter_company_type_name",
         "items" : [
          {
           "alwaysQuery" : true,
           "listWidth" : 200,
           "idField" : "id",
           "triggerAction" : "all",
           "fieldLabel" : "company",
           "forceSelection" : true,
           "displayField" : "keyword",
           "minChars" : 2,
           "valueField" : "id",
           "xtype" : "ComboBox",
           "allowBlank" : true,
           "editable" : true,
           "width" : 200,
           "$ xns" : "Roo.form",
           "* prop" : "combo",
           "queryParam" : "query[keyword]",
           "tpl" : "<div class=\"x-grid-cell-text x-btn button\"><b>{keyword}</b> </div>",
           "items" : [
            {
             "listeners" : {
              "beforeload" : "function (_self, o){\n    o.params = o.params || {};\n    \n    var s = _this.form.findField('campaign_id').getValue() * 1;\n    \n    if(isNaN(s) || s < 1){\n        return false;\n    }\n    \n    o.params.is_active  = 1;\n    o.params.is_keyword = 1;\n    o.params.project_id = s;\n}\n"
             },
             "xtype" : "Store",
             "remoteSort" : true,
             "$ sortInfo" : "{ direction : 'ASC', field: 'display_name' }",
             "$ xns" : "Roo.data",
             "* prop" : "store",
             "items" : [
              {
               "$ url" : "baseURL + '/Roo/clipping_keywords.php'",
               "xtype" : "HttpProxy",
               "method" : "GET",
               "$ xns" : "Roo.data",
               "* prop" : "proxy"
              },
              {
               "id" : "code",
               "root" : "data",
               "xtype" : "JsonReader",
               "$ fields" : "[{\"name\":\"id\",\"type\":\"int\"},{\"name\":\"keyword\",\"type\":\"string\"}]",
               "$ xns" : "Roo.data",
               "* prop" : "reader",
               "totalProperty" : "total"
              }
             ]
            }
           ]
          }
         ]
        },
        {
         "xtype" : "Hidden",
         "$ xns" : "Roo.form",
         "name" : "id"
        }
       ]
      }
     ]
    },
    {
     "listeners" : {
      "|click" : "function() {\n    _this.form.reset();\n    _this.dialog.hide();\n}"
     },
     "text" : "Cancel",
     "xtype" : "Button",
     "$ xns" : "Roo",
     "* prop" : "buttons[]"
    },
    {
     "listeners" : {
      "|click" : "function() {\n    /*\n    var name =     _this.form.findField('name').getValue();\n    name = name.toUpperCase().replace(/[^A-Z]+/g, '');\n    if (!name.length) {\n        Roo.MessageBox.alert(\"Error\",\"Please fill in a valid name\");\n        return;\n    }\n    _this.form.findField('name').setValue(name);\n \n    _this.form.doAction('submit');\n    */\n    \n}"
     },
     "text" : "OK",
     "xtype" : "Button",
     "$ xns" : "Roo",
     "* prop" : "buttons[]"
    }
   ]
  }
 ]
}